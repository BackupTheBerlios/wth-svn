#
# configuration file for rrdproc
#
# for debugging pruposes set $DEBUG = 1, or set environment variable DEBUG=1 
$DEBUG = 0; 

%extraopts = (
    windsensor => {
        rrdfile => "windsensor.rrd"
    },
    rainsensor => {
        rrdfile => "rainsensor.rrd"
    },
    thin_sensor => {
        rrdfile => "thin_sensor.rrd"
    },
    thout_sensor => {
        rrdfile => "thout_sensor.rrd"
    },
    tin_sensor => {
        rrdfile => "tin_sensor.rrd"
    },
    thb_sensor => {
        rrdfile => "thb_sensor.rrd"
    },
    thbnew_sensor => {
        rrdfile => "thbnew_sensor.rrd"
    }
);

%createopts = ( 
    windsensor => {
        "--start" => 946681200, 
        "--step"  => 300,
    },
    rainsensor => {
        "--start" => 1286732801,
        "--step"  => 300,
    },
    thin_sensor => {
        "--start" => 946681200,
        "--step"  => 300,
    },
    thout_sensor => {
        "--start" => 1286732801,
        "--step"  => 300,
    },
    tin_sensor => {
        "--start" => 1286732801,
        "--step"  => 300,
    },
    thb_sensor => {
        "--start" => 1286732801,
        "--step"  => 300,
    },
    thbnew_sensor => {
        "--start" => 1286732801,
        "--step"  => 300,
    }
);


%createdefs = (
    windsensor => [
       "DS:wind_direction:GAUGE:600:0:360",
       "DS:gust_windspeed:GAUGE:600:0:56",
       "DS:average_windspeed:GAUGE:600:0:56",
       "DS:windchill:GAUGE:600:-52:60",
       "RRA:AVERAGE:0.5:1:576",
       "RRA:AVERAGE:0.5:6:672",
       "RRA:AVERAGE:0.5:24:732",
       "RRA:AVERAGE:0.5:144:1460",
       "RRA:AVERAGE:0.5:288:1825",
       "RRA:AVERAGE:0.5:288:7300",
       "RRA:AVERAGE:0.5:12:262800",
       "RRA:LAST:0.5:1:1" 
    ],
    rainsensor => [
       "DS:current_rainrate:GAUGE:600:-30:70",
       "DS:total_rainfall:GAUGE:600:0:100",
       "DS:yesterday_rainfall:GAUGE:600:0:100",
       "RRA:AVERAGE:0.5:1:576",
       "RRA:AVERAGE:0.5:6:672",
       "RRA:AVERAGE:0.5:24:732",
       "RRA:AVERAGE:0.5:144:1460",
       "RRA:AVERAGE:0.5:288:1825",
       "RRA:AVERAGE:0.5:288:7300",
       "RRA:LAST:0.5:1:1" 
    ],
    thin_sensor => [
       "DS:temperature:GAUGE:600:-5:50",
       "DS:humidity:GAUGE:600:25:90",
       "DS:dew_temperature:GAUGE:600:0:49",
       "RRA:AVERAGE:0.5:1:576",
       "RRA:AVERAGE:0.5:6:672",
       "RRA:AVERAGE:0.5:24:732",
       "RRA:AVERAGE:0.5:144:1460",
       "RRA:AVERAGE:0.5:288:1825",
       "RRA:AVERAGE:0.5:288:7300",
       "RRA:LAST:0.5:1:1" 
    ],
    thout_sensor => [
       "DS:temperature:GAUGE:600:-20:60",
       "DS:humidity:GAUGE:600:25:90",
       "DS:dew_temperature:GAUGE:600:-10:60",
       "RRA:AVERAGE:0.5:1:576",
       "RRA:AVERAGE:0.5:6:672",
       "RRA:AVERAGE:0.5:24:732",
       "RRA:AVERAGE:0.5:144:1460",
       "RRA:AVERAGE:0.5:288:1825",
       "RRA:AVERAGE:0.5:288:7300",
       "RRA:LAST:0.5:1:1" 
    ],
    tin_sensor => [
       "DS:temperature:GAUGE:600:-5:50",
       "RRA:AVERAGE:0.5:1:600",
       "RRA:AVERAGE:0.5:6:700",
       "RRA:AVERAGE:0.5:24:775",
       "RRA:AVERAGE:0.5:288:797",
       "RRA:LAST:0.5:1:1" 
    ],
    thb_sensor => [
       "DS:temperature:GAUGE:600:-5:50",
       "DS:humidity:GAUGE:600:25:90",
       "DS:dew_temperature:GAUGE:600:0:49",
       "DS:pressure:GAUGE:600:795:1050",
       "RRA:AVERAGE:0.5:1:600",
       "RRA:AVERAGE:0.5:6:700",
       "RRA:AVERAGE:0.5:24:775",
       "RRA:AVERAGE:0.5:288:797",
       "RRA:LAST:0.5:1:1" 
    ],
    thbnew_sensor => [
       "DS:temperature:GAUGE:600:-5:50",
       "DS:humidity:GAUGE:600:25:90",
       "DS:dew_temperature:GAUGE:600:0:49",
       "DS:pressure:GAUGE:600:795:1050",
       "RRA:AVERAGE:0.5:1:576",
       "RRA:AVERAGE:0.5:6:672",
       "RRA:AVERAGE:0.5:24:732",
       "RRA:AVERAGE:0.5:144:1460",
       "RRA:AVERAGE:0.5:288:1825",
       "RRA:AVERAGE:0.5:288:7300",
       "RRA:LAST:0.5:1:1" 
    ]
);

%fetchopts = (
   windsensor =>  {
      "--start" => "-6000",
      LAST      => undef
   },
   rainsensor =>  {
      "--start" => "-6000",
      LAST      => undef
   },
   thin_sensor =>  {
      "--start" => "-6000",
      LAST      => undef
   },
   thout_sensor =>  {
      "--start" => "-6000",
      LAST      => undef
   },
   tin_sensor =>  {
      "--start" => "-6000",
      LAST      => undef
   },
   thb_sensor =>  {
      "--start" => "-6000",
      LAST      => undef
   },
   thbnew_sensor =>  {
      "--start" => "-6000",
      LAST      => undef
   }
);

%graphopts = (
    thbnew_sensor => {
        pressure => {
          "--start" => -86400,
          "--title"          => "Barometric Pressure",
          "--imgformat"      => "PNG",
          "--vertical-label" => "hPa",
          "--lower-limit"    => 795,
          "--upper-limit"    => 1075,
          "--width"          => 90,
          "--y-grid"         => "5:4",
          "--units-exponent" => 0,
          graphdefs => [
               "DEF:pressure=thbnew_sensor.rrd:pressure:AVERAGE",
               "CDEF:NNPressure=1.055615,pressure,*",
               "LINE2:pressure#00a000:pressure",
               "GPRINT:pressure:AVERAGE:Average %1.2lf\\n"
          ]
        },
        temperature => {
          "--start" => -86400,
          "--title"          => "Temperature",
          "--imgformat"      => "PNG",
          "--vertical-label" => "°C",
          "--lower-limit"    => 0,
          "--width"          => 90,
          "--y-grid" => "5:2",
          "--units-exponent" => 0,
          graphdefs => [
               "DEF:temperature=thbnew_sensor.rrd:temperature:AVERAGE",
               "LINE2:temperature#00a000:temperature",
               "GPRINT:temperature:AVERAGE:Average %1.2lf\\n"
          ]
        },
        humidity => {
          "--start" => -86400,
          "--title"          => "humidity",
          "--imgformat"      => "PNG",
          "--vertical-label" => "%",
          "--lower-limit"    => 0,
          "--width"          => 90,
          graphdefs => [
               "DEF:humidity=thbnew_sensor.rrd:humidity:AVERAGE",
               "LINE2:humidity#00a000:humidity",
               "GPRINT:humidity:AVERAGE:Average %1.2lf\\n"
          ]
        }
    },
    windsensor => {
        wind_direction => {
          "--start" => -86400,
          "--title"          => "Winddirection",
          "--imgformat"      => "PNG",
          "--vertical-label" => "°",
          "--lower-limit"    => 0,
          "--upper-limit"    => 360,
          "--width"          => 90,
          "--y-grid"         => "5:6",
          "--units-exponent" => 0,
          graphdefs => [
               "DEF:wind_direction=windsensor.rrd:wind_direction:AVERAGE",
               "LINE2:wind_direction#00a000:wind_direction",
               "GPRINT:wind_direction:AVERAGE:Average %1.2lf\\n"
          ]
        },
        gust_windspeed => {
          "--start" => -86400,
          "--title"          => "Gust Windspeed",
          "--imgformat"      => "PNG",
          "--vertical-label" => "m/s",
          "--lower-limit"    => 0,
          "--width"          => 90,
          "--y-grid" => "5:2",
          "--units-exponent" => 0,
          graphdefs => [
               "DEF:gust_windspeed=windsensor.rrd:gust_windspeed:AVERAGE",
               "LINE2:gust_windspeed#00a000:gust_windspeed",
               "GPRINT:gust_windspeed:AVERAGE:Average %1.2lf\\n"
          ]
        },
        average_windspeed => {
          "--start" => -86400,
          "--title"          => "Average Windspeed",
          "--imgformat"      => "PNG",
          "--vertical-label" => "m/s",
          "--lower-limit"    => 0,
          "--width"          => 90,
          "--y-grid" => "5:2",
          "--units-exponent" => 0,
          graphdefs => [
               "DEF:average_windspeed=windsensor.rrd:average_windspeed:AVERAGE",
               "LINE2:average_windspeed#00a000:average_windspeed",
               "GPRINT:average_windspeed:AVERAGE:Average %1.2lf\\n"
          ]
        },
        windchill => {
          "--start" => -86400,
          "--title"          => "windchill",
          "--imgformat"      => "PNG",
          "--vertical-label" => "°",
          "--lower-limit"    => 0,
          "--width"          => 90,
          graphdefs => [
               "DEF:windchill=windsensor.rrd:windchill:AVERAGE",
               "LINE2:windchill#00a000:windchill",
               "GPRINT:windchill:AVERAGE:Average %1.2lf\\n"
          ]
        }
    },
    Rainsensor => {
        Rainfall => {
          "--start" => -86400,
          "--title"          => "Rainfall",
          "--imgformat"      => "PNG",
          "--vertical-label" => "[mm]",
          "--lower-limit"    => 0,
          "--upper-limit"    => 360,
          "--width"          => 90,
          "--y-grid"         => "5:4",
          "--units-exponent" => 0,
          graphdefs => [
               "DEF:Rainfall=/proj/wetter/logs/Rainsensor.rrd:Rainfall:AVERAGE",
               "LINE2:Rainfall#00a000:Rainfall",
               "GPRINT:Rainfall:AVERAGE:Average %1.2lf\\n"
          ]
        }
    }
);


#@Sensors    = ( "windsensor", "rainsensor", "thin_sensor", "thout_sensor", "thbnew_sensor" );
#$WthDatabase = "/proj/wetter/logs/wmr9x8/wmr9x8.db";
$WthDatabase = "/usr/local/wth/wmr9x8.db";
@Sensors    = ( "windsensor", "thbnew_sensor", "rainsensor", "thout_sensor", "thin_sensor" );
